# Phase B 憲法（草案）

## 前提

Phase A-5 凍結物（`nexa_v1_0_0_full.html`）は参照専用。
いかなる理由でも改変・再解釈・流用による変更は禁止。

---

## B-0.1 用語凍結

以下の用語は Phase A で定義済み。Phase B で新語を作らない。

### データ構造
| 用語 | 定義 |
|------|------|
| D | 駅データ辞書（station_id → [lat, name, lng, lines[], LPlines[]]） |
| LN | 路線データ辞書（line_id → [name, stations[], transfers[]]） |
| S | 状態オブジェクト（outer: モード/選択駅, inner: 入力値） |
| LP | 直通判定用路線リスト |

### 評価関数
| 用語 | 定義 |
|------|------|
| gt() | 所要時間計算（駅A→駅B、乗換考慮） |
| E.r() | 逆引き評価（勤務先→到達可能駅リスト） |
| E.e() | 通常評価（物件条件→評価スコア） |

### フラグ・属性
| 用語 | 定義 |
|------|------|
| approx | 概算フラグ（直通路線なし時にtrue） |
| confidence | 確信度（減衰のみ、増幅なし） |

### スコア
| 用語 | 定義 |
|------|------|
| F | 最終スコア（総合評価値） |
| A | 軸別スコア配列（[金融, 生活, 将来]） |
| P | 物件価格（万円） |
| reachScore | 到達スコア |
| comfortScore | 快適性スコア |
| futureScore | 将来性スコア |

### ID形式
| 用語 | 定義 |
|------|------|
| station_id | station_{romaji}_{lat6}_{lng6} |
| line_id | {operator}_{line_romaji} |
| operator | 事業者コード（jr/metro/toei/private） |

---

## B-0.2 境界定義

### 評価器が語らない領域

| 領域 | 評価器の態度 |
|------|-------------|
| 推奨 | 語らない（「これが良い」とは言わない） |
| 比較優劣 | 語らない（「AよりBが良い」とは言わない） |
| 行動指示 | 語らない（「買うべき」「避けるべき」とは言わない） |
| 将来予測 | 語らない（「上がる」「下がる」とは言わない） |
| 感情価値 | 語らない（「安心」「不安」とは言わない） |
| 正解 | 語らない（「正しい選択」とは言わない） |

### 三分離の原則

```
┌─────────────────────────────────────────────────┐
│                    人間                         │
│              （解釈・判断・決定）                │
└─────────────────────────────────────────────────┘
                      ↑
              受け取るのみ（指示なし）
                      │
┌─────────────────────────────────────────────────┐
│                    UI                           │
│         （構造・配置・有無のみで表現）           │
│         色なし・強調なし・説明なし              │
└─────────────────────────────────────────────────┘
                      ↑
              表示するのみ（解釈なし）
                      │
┌─────────────────────────────────────────────────┐
│                  データ                         │
│            （事実・計算結果のみ）                │
│            意味付けなし・評価なし               │
└─────────────────────────────────────────────────┘
                      ↑
              計算するのみ（判断なし）
                      │
┌─────────────────────────────────────────────────┐
│                評価ロジック                      │
│              gt() / E.r() / E.e()               │
│              凍結済み・改変禁止                 │
└─────────────────────────────────────────────────┘
```

### 各層の責務

| 層 | する | しない |
|----|------|--------|
| 評価ロジック | 計算 | 判断 |
| データ | 保持 | 意味付け |
| UI | 配置 | 誘導 |
| 人間 | 解釈・決定 | （評価器の責務外） |

---

## 禁止事項（Phase B 全体）

1. 推奨・最適・改善の導入
2. 色・数値・順位の再付与
3. 体験を誘導するナラティブ
4. Phase A 凍結物への変更
5. 用語の新造・再定義

---

## 変更ゼロ宣言

Phase A-5 凍結物 `nexa_v1_0_0_full.html` に対し：
- 1文字も変更しない
- 1ピクセルも変更しない
- 1ロジックも変更しない

Phase B の成果物は、凍結物の「外側」にのみ存在する。

---

## Phase B の主題

「評価器の外側」を扱う：
- 評価結果の"受け取り方"の研究
- 沈黙と可視の境界設計
- 人間側の意思形成支援（非代替）

評価器は完成した。次は「評価器と人間の間」を扱う。
